---
import {
	getLangFromUrl,
	useTranslations,
	RECOMMENDATIONS_DATA,
} from "../i18n/utils";
import ReviewMap from "./ReviewMap";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const recommendations = RECOMMENDATIONS_DATA[lang];
---

<section id="recomendaciones" class="py-20 bg-stone-900 text-stone-100">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-white sm:text-4xl font-handwritten transform -rotate-1">{t('recommendations.title')}</h2>
      <p class="mt-4 text-xl text-stone-400">{t('recommendations.subtitle')}</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-12 bg-white/5 p-8 rounded-3xl backdrop-blur-sm border border-white/10 shadow-2xl">
      {[
        { key: 'to_do', label: t('recommendations.todo') },
        { key: 'drink_or_food', label: t('recommendations.eatdrink') },
        { key: 'neighborhood', label: t('recommendations.neighborhood') }
      ].map((cat) => (
        <div class="flex flex-col">
          <h3 class="text-2xl font-bold text-teal-400 mb-6 font-handwritten uppercase tracking-wider border-b-2 border-teal-400/30 pb-2 inline-block self-start transform -rotate-2">
            {cat.label}
          </h3>
          <ul class="space-y-4">
            {recommendations.filter((item) => item.category === cat.key).map((item) => (
              <li class="flex items-start group">
                <span class="text-teal-500 mr-2 transform group-hover:scale-125 transition-transform duration-300">â€¢</span>
                <a 
                    href={item.link} 
                    target="_blank" 
                    rel="noopener noreferrer"
                    class="text-lg text-stone-300 group-hover:text-white transition-colors duration-300 font-handwritten-body hover:underline decoration-teal-500/50 underline-offset-4"
                >
                    {item.title}
                </a>
              </li>
            ))}
          </ul>
        </div>
      ))}
    </div>

    <!-- Map Section -->
    <div class="mt-16 rounded-2xl overflow-hidden shadow-lg border border-white/10 h-[500px] relative z-0">
        <ReviewMap client:only="react" recommendations={recommendations} />
    </div>
  </div>
</section>

<style>
@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap');

.font-handwritten {
  font-family: 'Caveat', cursive;
}

.font-handwritten-body {
    font-family: 'Patrick Hand', cursive;
}
</style>