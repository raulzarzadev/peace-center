---
import {
	getLangFromUrl,
	useTranslations,
	RECOMMENDATIONS_DATA,
} from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const recommendations = RECOMMENDATIONS_DATA[lang];
---

<section id="recomendaciones" class="py-20 bg-stone-900 text-stone-100">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-white sm:text-4xl font-handwritten transform -rotate-1">{t('recommendations.title')}</h2>
      <p class="mt-4 text-xl text-stone-400">{t('recommendations.subtitle')}</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-12 bg-white/5 p-8 rounded-3xl backdrop-blur-sm border border-white/10 shadow-2xl">
      {recommendations.map((group) => (
        <div class="flex flex-col">
          <h3 class="text-2xl font-bold text-teal-400 mb-6 font-handwritten uppercase tracking-wider border-b-2 border-teal-400/30 pb-2 inline-block self-start transform -rotate-2">
            {group.category}
          </h3>
          <ul class="space-y-4">
            {group.items.map((item) => (
              <li class="flex items-start group">
                <span class="text-teal-500 mr-2 transform group-hover:scale-125 transition-transform duration-300">â€¢</span>
                <span class="text-lg text-stone-300 group-hover:text-white transition-colors duration-300 font-handwritten-body">{item}</span>
              </li>
            ))}
          </ul>
        </div>
      ))}
    </div>

    <!-- Map Section -->
    <div class="mt-16 rounded-2xl overflow-hidden shadow-lg border border-white/10 h-[400px] relative group">
        <div class="absolute inset-0 flex items-center justify-center bg-stone-800 z-10 group-hover:opacity-0 transition-opacity duration-500 pointer-events-none">
            <p class="text-stone-400 font-bold text-lg">Explora el mapa interactivo</p>
        </div>
        <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d115793.84076269931!2d-110.40706248316886!3d24.14197368095149!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x86afd13e9a4f6fa9%3A0x6b4f74676166164!2sLa%20Paz%2C%20B.C.S.!5e0!3m2!1ses-419!2smx!4v1706288644566!5m2!1ses-419!2smx" 
            width="100%" 
            height="100%" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade"
            class="grayscale group-hover:grayscale-0 transition-all duration-700"
        ></iframe>
    </div>
  </div>
</section>

<style>
@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap');

.font-handwritten {
  font-family: 'Caveat', cursive;
}

.font-handwritten-body {
    font-family: 'Patrick Hand', cursive;
}
</style>